
#include "RP20xx.h"
#include "board.h"

#include <stdio.h>

// See git clone https://gitlab.com/khockuba/cmsis-pi-pico.git~

void NMI_Handler(void)
{

}

void BusFault_Handler(void)
{

}

void UsageFault_Handler(void)
{

}

void HardFault_Handler(void)
{

}

void MemManage_Handler(void)
{

}

void SVC_Handler(void)
{

}

void DebugMon_Handler(void)
{

}

void PendSV_Handler(void)
{

}

extern unsigned long __stack;


/**
 * \brief This is the code that gets called on processor reset.
 * To initialize the device, and call the main() routine.
 */

void Reset_Handler(void)
{
	  SystemInit();                             /* CMSIS System Initialization */
	  __PROGRAM_START();                        /* Enter PreMain (C library entry point) */
}


const
__VECTOR_TABLE_ATTRIBUTE
VECTOR_TABLE_Type __Vectors [48] = {

    /* Configure Initial Stack Pointer, using linker-generated symbols */
    (VECTOR_TABLE_Type)(& __stack),
    Reset_Handler,
    NMI_Handler,
    HardFault_Handler,
    MemManage_Handler,
    BusFault_Handler,
    UsageFault_Handler,
    NULL,         /* Reserved */
	NULL,         /* Reserved */
	NULL,         /* Reserved */
	NULL,         /* Reserved */
    SVC_Handler,
    DebugMon_Handler,
	NULL,                  /* Reserved  */
    PendSV_Handler,		/* -2 */
    SysTick_Handler,	/* -1 */
};

//void __attribute__((used, section(".page0")))  bootsram5(void)
//{
//	//SCB->VTOR = (uint32_t) & __Vectors;
//    SCB->VTOR = 0x10000100;
//    __set_MSP(*(uint32_t*)0x10000100);
//    ((void (*)(void)) *(uint32_t*)0x10000104)();
//}

const uint8_t __attribute__((used, section(".page0"))) boot0 [256] =
{
	  0x00, 0xB5, 0x32, 0x4B, 0x21, 0x20, 0x58, 0x60, 0x98, 0x68, 0x02, 0x21, 0x88, 0x43, 0x98, 0x60,
	  0xD8, 0x60, 0x18, 0x61, 0x58, 0x61, 0x2E, 0x4B, 0x00, 0x21, 0x99, 0x60, 0x02, 0x21, 0x59, 0x61,
	  0x01, 0x21, 0xF0, 0x22, 0x99, 0x50, 0x2B, 0x49, 0x19, 0x60, 0x01, 0x21, 0x99, 0x60, 0x35, 0x20,
	  0x00, 0xF0, 0x44, 0xF8, 0x02, 0x22, 0x90, 0x42, 0x14, 0xD0, 0x06, 0x21, 0x19, 0x66, 0x00, 0xF0,
	  0x34, 0xF8, 0x19, 0x6E, 0x01, 0x21, 0x19, 0x66, 0x00, 0x20, 0x18, 0x66, 0x1A, 0x66, 0x00, 0xF0,
	  0x2C, 0xF8, 0x19, 0x6E, 0x19, 0x6E, 0x19, 0x6E, 0x05, 0x20, 0x00, 0xF0, 0x2F, 0xF8, 0x01, 0x21,
	  0x08, 0x42, 0xF9, 0xD1, 0x00, 0x21, 0x99, 0x60, 0x1B, 0x49, 0x19, 0x60, 0x00, 0x21, 0x59, 0x60,
	  0x1A, 0x49, 0x1B, 0x48, 0x01, 0x60, 0x01, 0x21, 0x99, 0x60, 0xEB, 0x21, 0x19, 0x66, 0xA0, 0x21,
	  0x19, 0x66, 0x00, 0xF0, 0x12, 0xF8, 0x00, 0x21, 0x99, 0x60, 0x16, 0x49, 0x14, 0x48, 0x01, 0x60,
	  0x01, 0x21, 0x99, 0x60, 0x01, 0xBC, 0x00, 0x28, 0x00, 0xD0, 0x00, 0x47, 0x12, 0x48, 0x13, 0x49,
	  0x08, 0x60, 0x03, 0xC8, 0x80, 0xF3, 0x08, 0x88, 0x08, 0x47, 0x03, 0xB5, 0x99, 0x6A, 0x04, 0x20,
	  0x01, 0x42, 0xFB, 0xD0, 0x01, 0x20, 0x01, 0x42, 0xF8, 0xD1, 0x03, 0xBD, 0x02, 0xB5, 0x18, 0x66,
	  0x18, 0x66, 0xFF, 0xF7, 0xF2, 0xFF, 0x18, 0x6E, 0x18, 0x6E, 0x02, 0xBD, 0x00, 0x00, 0x02, 0x40,
	  0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x07, 0x00, 0x00, 0x03, 0x5F, 0x00, 0x21, 0x22, 0x00, 0x00,
	  0xF4, 0x00, 0x00, 0x18, 0x22, 0x20, 0x00, 0xA0, 0x00, 0x01, 0x00, 0x10, 0x08, 0xED, 0x00, 0xE0,
	  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x74, 0xB2, 0x4E, 0x7A
};
